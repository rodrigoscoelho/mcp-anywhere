<div class="rounded-lg border border-gray-200 bg-white p-4 text-sm">
    {% if status == 'idle' %}
        <p class="text-gray-500">
            Preencha os campos acima e clique em <strong>Executar ferramenta</strong> para visualizar a resposta.
        </p>
    {% elif status == 'success' %}
        <div class="mb-3 rounded-md border border-green-200 bg-green-50 p-3 text-green-800">
            Ferramenta executada com sucesso{% if duration_ms is defined %} em {{ '%.1f' % duration_ms }} ms{% endif %}.
        </div>
        <div class="space-y-4">
            <div>
                <h4 class="font-medium text-gray-700">Argumentos enviados</h4>
                <pre class="mt-2 overflow-x-auto rounded bg-gray-900 p-3 font-mono text-xs text-gray-100">{{ arguments_json }}</pre>
            </div>
            <div>
                <h4 class="font-medium text-gray-700">Conteúdo (content)</h4>
                <pre class="mt-2 overflow-x-auto rounded bg-gray-900 p-3 font-mono text-xs text-gray-100">{{ result_content_json }}</pre>
            </div>
            {% if structured_json %}
            <div>
                <h4 class="font-medium text-gray-700">Structured content</h4>
                <pre class="mt-2 overflow-x-auto rounded bg-gray-900 p-3 font-mono text-xs text-gray-100">{{ structured_json }}</pre>
            </div>
            {% endif %}
        </div>
    {% elif status == 'error' %}
        <div class="mb-3 rounded-md border border-red-200 bg-red-50 p-3 text-red-800">
            {{ error_message or 'Não foi possível executar a ferramenta.' }}
        </div>
        {% if validation_errors %}
        <div class="rounded-md border border-yellow-200 bg-yellow-50 p-3 text-yellow-800">
            <p class="mb-2 font-medium">Verifique os campos abaixo:</p>
            <ul class="list-disc space-y-1 pl-5">
                {% for field, message in validation_errors.items() %}
                <li><strong>{{ field }}</strong>: {{ message }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if arguments_json %}
        <div class="mt-3">
            <h4 class="font-medium text-gray-700">Argumentos enviados</h4>
            <pre class="mt-2 overflow-x-auto rounded bg-gray-900 p-3 font-mono text-xs text-gray-100">{{ arguments_json }}</pre>
        </div>
        {% endif %}
        {% if error_details %}
        <div class="mt-3">
            <h4 class="font-medium text-gray-700">Detalhes técnicos</h4>
            <pre class="mt-2 overflow-x-auto rounded bg-gray-900 p-3 font-mono text-xs text-gray-100">{{ error_details }}</pre>
        </div>
        {% endif %}
    {% else %}
        <p class="text-gray-500">Estado desconhecido.</p>
    {% endif %}
</div>
